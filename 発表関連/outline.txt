1.自己紹介
2.背景
3.課題
4.解決方法
5.対象システム概要
6.テスト設計・実装
7.結果
8.考察
9.まとめ
10.所感

1. ~ 3. までは現行のままでいく

2.背景
ソフトウェア更新を前提とする組込みシステムでは変更に追従できる品質保証が求められている
ソフトウェアデファインドの考え方が組込みシステムにも広がり、機能拡張・変更の頻度が高まっている
変更頻度の増加に伴い、不具合発生リスクも増大している
組込みシステムでは、実機を含むシステム全体で不具合が顕在化するため、変更に追従可能な品質保証手法の確立が重要である


3.課題
各テストレイヤに応じた適切なテスト環境の構築が求められる
組込みシステムのシステムテストは実機がなければ十分な検証ができない
しかし、、、
実機の台数は限られている
テスト環境の準備・操作・テスト実行に人手を要する


4.解決方法
クラウド環境と連携したシステムテスト実行

Self-hosted Agent（Host PC）経由で実機に接続
単体テスト通過をトリガにシステムテストを実行
		↓
実機が1箇所あればその場に実機がなくてもシステムテスト実行・結果確認が可能
		↓
グローバル開発環境への適用
実機用意の工数削減

5.対象システム概要
ユースケース説明：使用済み核燃料プール温度監視システム（温度閾値によってLED状態切り替え）
現実的な制約を持つシンプルな組込みシステムを開発した。
本システムは、実機動作、外部入力、内部状態遷移、可視化、および常駐サービス化といった要素を含んでおり、組込みシステムにおけるシステムテスト設計の検討対象として適切な構成となっている。
シーケンス図を用いて入出力間(POST/GET/sysfs)の流れを説明をする（これでアーキテクチャ伝わるといいな）
デモ(Web UI/Board)
Web UI は static page で実装していることをちゃんと話す。
僕は static page の仕組みをよく理解していないので、ちゃんと調べて説明できるようにしておきたい。


6.テスト設計・実装

システムテスト項目としては
ST-01 起動確認 systemdで起動しているか
ST-02 static file に到達できるか
ST-03 初期値(POST/GET/SSH cat)
ST-04...09 境界値でPOSTに対するGET
ST-10...13 代表値でPOSTに対するSSH cat
ST-14...15 異常値でPOSTに対するGET
ST-16 バーストでPOSTに対するGETの状態
なんだけど、、、

クラウド環境からでもローカル環境と同じようにシステムテストできるようにするのが4.解決方法だったが
上長から、ローカルと違ってクラウド環境特有の部分は何と聞かれた。
どうしよう。

また、クラウド連携にフォーカスを当てた点として、単にテスト結果のログをファイル出力するのではなく、
JUnit XMLの仕組みを利用して、テスト結果をその形式で出力し、Azure Pipelinesのテストレポート機能で可視化できるようにした点を強調したい。
その仕組みも説明してほしいらしい。
図も作ってほしいらしい。
JUnit XMLについて説明する必要がある。
Azure Pipelinesのテストレポート機能についても説明する必要がある。
.json/.logは必要なのかも僕はよくわかってない。
単体テストでGoogle Testを使っていて、それを参考にしたんだけど、僕はいまいちその仕組みを理解してないので、調べて説明できるようにしておきたい。
そもそもGoogle Testを使った単体テストはなぜAzure Pipelinesで可視化できているのかもわかってない。
ローカル環境でのシステムテスト実行中の動画を提示して、クラウド環境でもせっかくAzure Pipelines上にテスト結果を閲覧する機能があるので、その機能を生かし、同じようにシステムテスト結果を可視化できるようにした点を説明するのが良いかもしれない。

テストケースにおいては、
ソフトウェア更新を前提とする組込みシステムでは、機能追加や修正によって既存機能が壊れていないことを毎回同じ観点で確認できる仕組みが重要であると考えた。
特に今回はユースケースが温度監視システムなので、閾値を中心とした入出力の組み合わせはテスト項目としては重要であるよね。
curl(POST/GET),cat(sysfs)をみる設計した。

End2End って言ったら否定されたんだけど、なんでだろう。
static page だったら、テストの観点からフロントエンドはやらなくてもいいって言われたんだけど、そのへんもよくわかってない。

また、時間の関係でテストケースを絞って、システムテストとしての網羅性は低いことは認めたい。
テストケースの網羅は今後いくらでも拡張できると思っていて、クラウド連携にフォーカスした。
しかし、非機能要件やCPU/メモリの簡易監視や応答性能のテストなど、システムテストとして追加すべき観点は多々あると思う。
デプロイ整合性はLEEさんが担当してくれた。


7.結果
Azure Pipelines上でのテスト実行結果のスクリーンショットのせて、テスト結果の可視化の説明をする。
これで、その場に実機がなくても、クラウド環境からシステムテストの結果を確認できることを説明する。


8.考察
どうしよう。


9.まとめ
どうしよう。




## 考察

### 実機を含むシステムテストの難しさとその対応

ソフトウェアデファインド組込みシステムにおいて、
システムテストを自動化する上で最も難しかった点は、
**実機の状態がテスト結果に直接影響する**ことであった。

クラウド環境や仮想環境では、
テスト実行前の状態を毎回初期化できることが前提となるが、
組込みシステムでは、

* 実機の起動状態
* 常駐サービスの状態
* 前回実行時の内部状態
  などがテストの前提条件となり、
  これらが揃わない場合、テストが不安定になる問題があった。

この問題に対し、本取り組みでは、
**テスト対象を明確に限定し、前提条件をテスト項目として明示する**
という方針を採用した。
具体的には、systemdによるサービス起動確認や初期値確認を
システムテストの一部として組み込み、
実機がテスト可能な状態であることを確認した上で
機能検証を行う構成とした。

---

### 回帰テスト設計における取捨選択

もう一つの課題は、
**限られた期間の中で、どこまでを自動テストの対象とするか**
という点であった。

本来であれば、Webダッシュボードの表示確認や
非機能要件（性能・負荷）まで含めた検証が望ましいが、
今回は、実機に強く依存し、
かつ不具合が顕在化しやすいロジック部分に対象を絞った。

そのため、

* POST による外部入力
* GET による内部状態の取得
* SSH による実機状態の直接確認
  という最小限のI/Fを用いたテスト構成とし、
  同一テストケースを繰り返し実行可能な
  **回帰テストとして成立する設計**を優先した。

この取捨選択により、
UIを含まない構成ではあるものの、
組込みシステムにおけるシステムテストとして
本質的な確認点を押さえることができたと考える。

---

### 自動化における限界と今後の課題

本取り組みを通じて、
組込みシステムにおけるDevOps適用では、
**自動化を進めるほど、逆にリスクが顕在化する場合がある**
ことも明らかになった。

特に、デプロイとシステムテストの実行が分離している場合、
テスト対象のバイナリと実機上で動作しているバイナリの
整合性が取れない可能性があり、
自動化されたテストであっても
誤った結果を導く危険性がある。

この点については、
自動デプロイ担当との役割分担を通じて課題として認識できており、
今後は、デプロイ完了をトリガとしたテスト実行や、
テスト対象バージョンの明示といった仕組みの検討が必要である。

---

## まとめ案①（王道・一番安全）

> 本インターンシップでは、
> ソフトウェアデファインド組込みシステムにおいて課題となる
> **実機を含むシステムテストの設計と自動化**に取り組んだ。
>
> クラウドCIを起点とし、Host PC 経由で実機に接続する構成を採ることで、
> クラウド環境のみでは完結しない組込みシステムに対しても、
> **再現性を意識した回帰テストの実行**を可能とした。
>
> 本取り組みを通じて、
> 組込みシステムにおけるDevOps適用では、
> 実機依存部分を前提としたテスト設計と役割分担が重要であることを確認した。

▶ 無難・評価が落ちにくい
▶ 研究開発職レビュー向け

---

## まとめ案②（あなたの担当が強く伝わる）

> 本インターンシップでは、
> **実機を含む組込みシステムに対するシステムテスト設計**に焦点を当て、
> ソフトウェア更新を前提とした品質保証の在り方を検討した。
>
> クラウドCIをテストの起点としつつ、
> 実機状態を直接確認できる最小限のI/F（POST / GET / SSH）に基づく
> テストケースを設計することで、
> 実機依存性の高いロジック部分に対する回帰テストを実現した。
>
> この結果、組込みDevOpsにおいては、
> 自動化そのものよりも、
> **「何を」「どの粒度で」「どこまで自動化するか」の設計が重要**であることを明らかにした。

▶ 水谷＝システムテスト担当が明確
▶ LEEさん（自動デプロイ）との分担も自然に想起される

---

## まとめ案③（考察寄り・一段レベル高め）

> 本インターンシップを通じて、
> ソフトウェアデファインド組込みシステムにおけるDevOps適用では、
> クラウド技術そのものよりも、
> **実機を含むシステム全体をどうテスト対象として捉えるか**が
> 重要であることを確認した。
>
> 本取り組みでは、実機依存部分を意識的に切り出し、
> 回帰テストとして成立する最小構成のシステムテストを設計・実装した。
> これにより、実機を必要とする組込みシステムであっても、
> クラウドCIと連携した品質確認の可能性を示すことができた。
>
> 一方で、デプロイとテスト対象の整合性といった課題も明確になり、
> 組込みDevOpsにおける今後の検討事項として整理できた。

▶ 「できたこと」と「限界」の両方を示せる
▶ 研究開発っぽさが一番強い
